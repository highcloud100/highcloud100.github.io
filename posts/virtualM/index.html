<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-233565867-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-233565867-1'); </script><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Virtual memory management" /><meta name="author" content="highcloud" /><meta property="og:locale" content="ko" /><meta name="description" content="Virtual memory 개요 가상 메모리는 프로세스가 어디에 위치하든 0번부터 시작되는 메모리 공간을 가진다. 논리 주소와 차이점은 실제 물리 메모리에 비례하지 않는다는 점이다. 가상 메모리는 각 프로세스마다 자신이 모든 메모리를 점유하는 것처럼 만든다. 이론적으로는 무한이지만 물리 메모리의 최대 크기로 한정된다. 프로세스마다 메모리를 모두 점유하여 사용하면 메모리 공간이 많이 필요하다. 즉 4GB 메모리에서는 ( 프로세스 수 x 4 GB )의 공간이 필요하다. 이를 가상 메모리에서는 스왑을 이용하여 해결한다. 프로세스마다 가상 주소를 가지고 있고, 이는 실제 메모리에 연결되어야 한다. 이런 작업을 동적 주소 변환 (DAT)이라 부른다. 메모리 관리자가 물리 메모리를 나누고 프로세스들을 배치하는 작업등을 한다. 메모리 분할 방식" /><meta property="og:description" content="Virtual memory 개요 가상 메모리는 프로세스가 어디에 위치하든 0번부터 시작되는 메모리 공간을 가진다. 논리 주소와 차이점은 실제 물리 메모리에 비례하지 않는다는 점이다. 가상 메모리는 각 프로세스마다 자신이 모든 메모리를 점유하는 것처럼 만든다. 이론적으로는 무한이지만 물리 메모리의 최대 크기로 한정된다. 프로세스마다 메모리를 모두 점유하여 사용하면 메모리 공간이 많이 필요하다. 즉 4GB 메모리에서는 ( 프로세스 수 x 4 GB )의 공간이 필요하다. 이를 가상 메모리에서는 스왑을 이용하여 해결한다. 프로세스마다 가상 주소를 가지고 있고, 이는 실제 메모리에 연결되어야 한다. 이런 작업을 동적 주소 변환 (DAT)이라 부른다. 메모리 관리자가 물리 메모리를 나누고 프로세스들을 배치하는 작업등을 한다. 메모리 분할 방식" /><link rel="canonical" href="https://highcloud100.github.io/posts/virtualM/" /><meta property="og:url" content="https://highcloud100.github.io/posts/virtualM/" /><meta property="og:site_name" content="highcloud100" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-23T15:20:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Virtual memory management" /><meta name="twitter:site" content="@highcloud100" /><meta name="twitter:creator" content="@highcloud" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"highcloud"},"dateModified":"2022-07-23T15:20:00+09:00","datePublished":"2022-07-23T15:20:00+09:00","description":"Virtual memory 개요 가상 메모리는 프로세스가 어디에 위치하든 0번부터 시작되는 메모리 공간을 가진다. 논리 주소와 차이점은 실제 물리 메모리에 비례하지 않는다는 점이다. 가상 메모리는 각 프로세스마다 자신이 모든 메모리를 점유하는 것처럼 만든다. 이론적으로는 무한이지만 물리 메모리의 최대 크기로 한정된다. 프로세스마다 메모리를 모두 점유하여 사용하면 메모리 공간이 많이 필요하다. 즉 4GB 메모리에서는 ( 프로세스 수 x 4 GB )의 공간이 필요하다. 이를 가상 메모리에서는 스왑을 이용하여 해결한다. 프로세스마다 가상 주소를 가지고 있고, 이는 실제 메모리에 연결되어야 한다. 이런 작업을 동적 주소 변환 (DAT)이라 부른다. 메모리 관리자가 물리 메모리를 나누고 프로세스들을 배치하는 작업등을 한다. 메모리 분할 방식","headline":"Virtual memory management","mainEntityOfPage":{"@type":"WebPage","@id":"https://highcloud100.github.io/posts/virtualM/"},"url":"https://highcloud100.github.io/posts/virtualM/"}</script><title>Virtual memory management | highcloud100</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="highcloud100"><meta name="application-name" content="highcloud100"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/80192345?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">highcloud100</a></div><div class="site-subtitle font-italic">One of the comforting things about old memories is their tendency to take on a rosy glow.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/highcloud100" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/highcloud100" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['highcloud100','inha.edu'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Virtual memory management</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Virtual memory management</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1658557200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 23, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> baekbumsung </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2135 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="virtual-memory">Virtual memory</h1><hr /><h2 id="개요"><span class="mr-2">개요</span><a href="#개요" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><ul><li><p>가상 메모리는 프로세스가 어디에 위치하든 0번부터 시작되는 메모리 공간을 가진다.</p><ul><li>논리 주소와 차이점은 실제 물리 메모리에 비례하지 않는다는 점이다.</ul><li><p>가상 메모리는 각 프로세스마다 자신이 모든 메모리를 점유하는 것처럼 만든다.</p><ul><li>이론적으로는 무한이지만 물리 메모리의 최대 크기로 한정된다.</ul><li><p>프로세스마다 메모리를 모두 점유하여 사용하면 메모리 공간이 많이 필요하다.</p><ul><li>즉 4GB 메모리에서는 ( 프로세스 수 x 4 GB )의 공간이 필요하다.<li>이를 가상 메모리에서는 스왑을 이용하여 해결한다.</ul><li><p>프로세스마다 가상 주소를 가지고 있고, 이는 실제 메모리에 연결되어야 한다.</p><ul><li>이런 작업을 동적 주소 변환 (DAT)이라 부른다.<li>메모리 관리자가 물리 메모리를 나누고 프로세스들을 배치하는 작업등을 한다.</ul></ul><h2 id="메모리-분할-방식"><span class="mr-2">메모리 분할 방식</span><a href="#메모리-분할-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><div class="table-wrapper"><table><thead><tr><th>구분<th>가상 메모리<th>물리 메모리<tbody><tr><td>최대 메모리 크기<td>cpu 비트 값에 의존<td>cpu 비트 값에 의존<tr><td>메모리 분할 방식<td>세그멘테이션<td>가변 분할 방식<tr><td><td>페이징<td>고정 분할 방식<tr><td><td>세그멘테이션 페이징 혼용<td><tr><td>주소 지정 방식<td>가상 주소<td>절대, 상대 주소</table></div><h2 id="table"><span class="mr-2">Table</span><a href="#table" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><ul><li>메모리 관리자는 가상 메모리와 물리 메모리를 매핑 테이블을 이용해 관리한다.<li>물리 메모리의 분할 방식에 따라 이름이 나뉜다.<ul><li>page mapping table<li>segmentation mapping table</ul></ul><h1 id="paging">Paging</h1><hr /><h2 id="구현"><span class="mr-2">구현</span><a href="#구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><ul><li>고정 분할 방식을 이용한 방법이다.<ul><li>단위는 페이지와 프레임으로 구분된다.<li>이때 페이지와 프레임의 크기는 같다.</ul></ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180416984-9244cd51-cc99-48b5-b9fa-3d5799b2fb78.png" alt="" width="600" data-proofer-ignore></p><blockquote><p>invalid는 페이지가 스왑 영역에 있다는 것이다.</p></blockquote><h2 id="주소-변환-과정"><span class="mr-2">주소 변환 과정</span><a href="#주소-변환-과정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><h3 id="개념"><span class="mr-2">개념</span><a href="#개념" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>가상 주소를 VA = &lt;P, D&gt; 로 표현한다.</p><ul><li>page : 페이지 번호<li>distance : 페이지의 처음 주소부터 해당 위치까지 거리<ul><li>offset이라 정의하기도 한다.</ul></ul><li><p>물리 주소를 PA = &lt;F, D&gt;로 표현한다.</p><ul><li>frame</ul><li><p>이때 주소 변환을 다음과 같이 정의한다.</p></ul><p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>VA&nbsp;=&nbsp;&lt;P,&nbsp;D&gt;</mtext><mo>→</mo><mtext>PA&nbsp;=&nbsp;&lt;F,&nbsp;D&gt;</mtext></mrow><annotation encoding="application/x-tex"> \text{VA = &lt;P, D&gt;} \rightarrow \text{PA = &lt;F, D&gt;} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord">VA&nbsp;=&nbsp;&lt;P,&nbsp;D&gt;</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord">PA&nbsp;=&nbsp;&lt;F,&nbsp;D&gt;</span></span></span></span></span></span></span></p><p><img data-src="https://user-images.githubusercontent.com/80192345/180418775-86cce510-3891-47a2-ac69-9ac7c3e30975.png" alt="" width="600" data-proofer-ignore></p><ul><li>페이지 테이블의 한 줄을 PTE라고 부른다.<ul><li>page table entry</ul></ul><h3 id="bit-cpu"><span class="mr-2">16 bit CPU</span><a href="#bit-cpu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>컴퓨터는 이진법을 사용하므로 페이지의 크기는 2의 n승이 된다.</p><li><p>P, D 값을 정의해보자.</p><ul><li>P = 가상 주소 / 한 페이지의 크기<li>D = 가상 주소 % 한 페이지의 크기</ul><li><p>16 비트 cpu에서 한 페이지의 크기가 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">2^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span></span> 일 때를 생각하자.</p><ul><li>가상 주소는 0~65535 만큼의 공간을 가진다.<li>이때 페이지는 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>6</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^6-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.897438em; vertical-align: -0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>개<li>페이지 하나의 번지 수는 <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>10</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{10}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.897438em; vertical-align: -0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>개가 존재한다.</ul></ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180420201-03ed0584-127e-4d16-8612-224890cadbf4.png" alt="" width="500" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/80192345/180421257-8eb52af0-2ed3-425d-a111-3020c677bbe7.png" alt="" width="500" data-proofer-ignore></p><h2 id="페이지-테이블-관리"><span class="mr-2">페이지 테이블 관리</span><a href="#페이지-테이블-관리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p><img data-src="https://user-images.githubusercontent.com/80192345/180584950-ec8e99d3-a3ec-4e4b-b5e3-ebf651434c6c.png" alt="" width="500" data-proofer-ignore></p><ul><li><p>여러 프로세스들은 각자의 페이지 테이블을 가지고 있다.</p><ul><li>고로 페이지 테이블의 크기는 프로세스 수에 비례한다.</ul><li><p>문제는 테이블의 크기가 작지 않다는 것이다.</p><ul><li>만약 32bit, 512B 페이지 시스템이라면 테이블의 최대 크기는 24.11MB이다.<li>프로세스가 40개만 올라와도 1GB 정도가 된다.</ul><li><p>페이지 테이블은 메모리의 운영체제 영역에 존재한다.</p><ul><li>페이지 테이블의 일부도 스왑 영역으로 옮겨 사용하기도 한다.</ul><li><p>페이지 테이블은 자주 접근해야 하는 자료구조이다.</p><ul><li>이에 레지스터를 이용해 페이지의 시작 주소(물리 주소)를 보관한다.<li>Page Table Base Register : PTBR</ul></ul><h2 id="페이지-테이블-매핑-방식"><span class="mr-2">페이지 테이블 매핑 방식</span><a href="#페이지-테이블-매핑-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><ol><li>직접 매핑<li>연관 매핑<li>집합-연관 매핑<li>역매핑 ( <a href="https://www.geeksforgeeks.org/inverted-page-table-in-operating-system/">찾아보자</a> )</ol><ul><li>각 방법마다 가상 주소를 물리 주소로 변환하는 방법이 다르며, 테이블을 저장하는 방법도 다르다.</ul><h3 id="직접-매핑"><span class="mr-2">직접 매핑</span><a href="#직접-매핑" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>테이블 전체가 물리 메모리에 올라와 있는 상태이다.<li>바로 주소 변환이 가능하다.</ul><h3 id="연관-매핑"><span class="mr-2">연관 매핑</span><a href="#연관-매핑" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>테이블 전체를 스왑 영역에서 관리한다.<ul><li>여유 공간이 작을 때 사용</ul><li>일부만 물리 메모리에 가지고 있는다.<ul><li>일부의 테이블을 다음과 같이 부른다.<li>변환 색인 버퍼 / Translation look-aside buffer<li>연관 레지스터 / associate register</ul><li>원하는 페이지가 물리 주소에 있다면 TLB 히트<li>찾지 못한다면 TLB 미스라고 부른다.<ul><li>미스가 많이 발생하면 주소 변환이 느려진다.</ul></ul><h3 id="집합-연관-매핑"><span class="mr-2">집합-연관 매핑</span><a href="#집합-연관-매핑" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>TLB 미스의 단점을 개선하기 위한 방법이다.</p><li><p>한 개의 테이블을 추가로 사용한다.</p><li><p>가상 주소를 나타내는 방법은 다음과 같다.<br /> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>VA&nbsp;=&nbsp;&lt;P1,&nbsp;P2,&nbsp;D&gt;</mtext></mrow><annotation encoding="application/x-tex"> \text{VA = &lt;P1, P2, D&gt;} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord">VA&nbsp;=&nbsp;&lt;P1,&nbsp;P2,&nbsp;D&gt;</span></span></span></span></span></span></span></p><li><p>1번 테이블을 디렉터리 테이블이라 부르며 테이블이 스왑 영역에 있는지 확인 할 수 있다.</p><ul><li>스왑 영역에 없다면 P2 값을 이용해 메모리에 접근한다.</ul><li><p>디렉토리 테이블 만들기</p><ul><li>기존에 있던 페이지를 일정 개수만큼 묶는다.<li>이후 디렉토리 테이블에 연결 시킨다.<li>예를 들면 5 묶음으로 페이지 테이블을 나누면 P&lt;7,D&gt; 는 P&lt;1, 2, D&gt;로 사용하게 된다.</ul></ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180588106-fe5325e8-7d4f-4f79-929d-1397aa53b198.png" alt="" data-proofer-ignore></p><h1 id="segmentaion">Segmentaion</h1><hr /><ul><li>가변 분할 방식을 이용한 가상 메모리 관리 기법이다.<li>페이징 방법과 같이 매핑 테이블을 사용한다.<ul><li>이를 Segmentation mapping table 이라 부른다.</ul></ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180591785-d9b4c54d-4f98-48ee-be0b-9028378aba75.png" alt="" width="600" data-proofer-ignore></p><ul><li>세그멘테이션 기법도 메모리가 부족하면 스왑 영역을 사용한다.<li>세그멘테이션 테이블에는 limit가 있다.<ul><li>이는 가변적인 프로세스 크기를 다루기 위함이다.<li>주어진 메모리 영역을 넘어가지 못하도록 제한한다.<li>만약 사용자가 프로세스 A에 주어진 공간을 벗어나는 주소에 접근하려하면 Trap 인터럽트를 발생시킨다.<li>Trap이 발생하면 OS는 segmentation fault 메시지를 사용자에게 보낸다.</ul></ul><blockquote><p>시그널로 프로세스를 중지시키는 것은 사용자가 의도한 인터럽트이다. ( ctrl+c)</p></blockquote><ul><li>주소 변환 과정은 동일하다.<li>기존의 가변 분할 방식의 장, 단점을 모두 가진다.</ul><h3 id="장점"><span class="mr-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>프로세스 단위로 메모리를 관리해서 페이지 테이블이 작고 간단하다.</ul><h3 id="단점"><span class="mr-2">단점</span><a href="#단점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>외부 단편화로 인한 메모리 관리 복잡성</ul><h1 id="segmentation-paging-혼용-기법">segmentation-paging 혼용 기법</h1><hr /><p><a href="https://www.baeldung.com/cs/segmented-paging-vs-paged-segmentation">참고</a></p><blockquote><p>paged segmentation 에 관한 이야기이다.</p></blockquote><ul><li><p>두 기법은 장단점이 있다.</p><ul><li>이를 부분적으로 취한 기법이다.</ul><li><p>메모리 접근 권한 개념이 추가된다.</p><ul><li><a href="https://www.youtube.com/watch?v=d_S2QGQ_rBo">https://www.youtube.com/watch?v=d_S2QGQ_rBo</a> 참고하자.</ul><li><p>페이지 테이블에 권한 비트까지 추가되면 페이지 테이블의 크기가 커진다.</p><ul><li>반복되는 권한 비트 제거를 위해 세그멘테이션 테이블을 이용한다.<li>이외에도 반복되는 정보를 세그멘테이션 테이블에서 관리할 수 있다.</ul></ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180592688-742e290a-19b0-406f-aca2-9ec876919274.png" alt="" width="500" data-proofer-ignore></p><ul><li>주소 변환 과정을 알아보자</ul><p><img data-src="https://user-images.githubusercontent.com/80192345/180593104-2f481a38-93c9-4bcd-ba3b-ccd79ef52c02.png" alt="" data-proofer-ignore></p><ul><li><p>혼용 기법에서는 다음과 같이 주소를 나타낸다.<br /> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>VA&nbsp;=&nbsp;&lt;&nbsp;S,&nbsp;P,&nbsp;D&nbsp;&gt;</mtext></mrow><annotation encoding="application/x-tex"> \text{VA = &lt; S, P, D &gt;} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.87777em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord">VA&nbsp;=&nbsp;&lt;&nbsp;S,&nbsp;P,&nbsp;D&nbsp;&gt;</span></span></span></span></span></span></span></p><ul><li>S : 세그먼트 번호<li>P : 페이지 번호<li>D : 페이지 처음 위치부터 거리</ul><li><p>변환 과정을 순서대로 알아보자.</p></ul><p>1 . 가상 주소를 구한다.<br /> 2. 세그멘테이션 테이블에서 권한과 메모리 영역을 검사한다.<br /> 3. 페이지 테이블에서 페이지가 어느 프레임에 연결되었는지 찾는다.<br /> 4. 메모리에 있다면 접근한다.<br /> 5. 없다면 스왑 영역에서 해당 페이지를 물리 메모리로 가져온다.<br /> 6. D 만큼 떨어진 곳에 접근하여 데이터를 사용한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cs/'>CS</a>, <a href='/categories/os/'>OS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/os/" class="post-tag no-text-decoration" >os</a> <a href="/tags/cs/" class="post-tag no-text-decoration" >cs</a> <a href="/tags/summer/" class="post-tag no-text-decoration" >summer</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Virtual+memory+management+-+highcloud100&url=https%3A%2F%2Fhighcloud100.github.io%2Fposts%2FvirtualM%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Virtual+memory+management+-+highcloud100&u=https%3A%2F%2Fhighcloud100.github.io%2Fposts%2FvirtualM%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fhighcloud100.github.io%2Fposts%2FvirtualM%2F&text=Virtual+memory+management+-+highcloud100" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script src="https://utteranc.es/client.js" repo="highcloud100/blog-utterances" issue-term="pathname" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/xv6%EB%B0%B1%EC%97%85/">xv6 백업</a><li><a href="/posts/gpuServerSetting/">gpu 서버 세팅</a><li><a href="/posts/winter/">2023 Winter Vacation</a><li><a href="/posts/%EB%85%B8%ED%8A%B8%EB%B6%81-%EC%84%B8%ED%8C%85/">노트북 세팅</a><li><a href="/posts/plan240508/">추후 계획과 현 상황?</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/summer/">summer</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/ml/">ML</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/distributed-systems/">Distributed_Systems</a> <a class="post-tag" href="/tags/tcp/">tcp</a> <a class="post-tag" href="/tags/%EC%8B%A4%EC%8A%B5%EA%B3%BC-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%A6%AC%EB%88%85%EC%8A%A4-%EA%B5%AC%EC%A1%B0/">실습과 그림으로 배우는 리눅스 구조</a> <a class="post-tag" href="/tags/life/">life</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/start/"><div class="card-body"> <em class="small" data-ts="1656982800" data-df="ll" > Jul 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>운영체제 공부 정리</h3><div class="text-muted small"><p> 운영체제 공부 정리 2학년 여름 방학 운영체제에 대해 공부하려 한다. 7월 20일까지 공부 계획 중… 공부 자료 / 출처 OS쉽게 배우는 운영체제 조성호널널한 개발자 - 운영체제 강의Kernel of linux 고건 교수님실습과 그림으로 배우는 리눅스 구조</p></div></div></a></div><div class="card"> <a href="/posts/intro/"><div class="card-body"> <em class="small" data-ts="1656988740" data-df="ll" > Jul 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>intro of OS</h3><div class="text-muted small"><p> OS 운영체제는 사용자와 컴퓨터 사이에서 하드웨어 사이에서 작동하는 시스템이다. 운영체제의 목표는 다음과 같다. OS자원관리자원 보호하드웨어 인터페이스사용자 인터페이스효휼성안정성확장성편리성 Performance Throughput — jobs/sec Utilization — % of time busy Response time — sec / j...</p></div></div></a></div><div class="card"> <a href="/posts/systemcall/"><div class="card-body"> <em class="small" data-ts="1656999000" data-df="ll" > Jul 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>System Call</h3><div class="text-muted small"><p> SystemCall system call은 커널에게 I/O 작업을 요청하는 것이다. 하드웨어의 mode bit 를 사용하여 커널모드와 유저모드로 나눈다. cpu의 mode bit 가 0이면 kernel mode 이며, cpu는 어떤 메모리의 영역이든 접근할 수 있다. mode bit이 1이면 user mode로 cpu는 파일에 영향을 주는 명령...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cnn1/" class="btn btn-outline-primary" prompt="Older"><p>CNN-1</p></a> <a href="/posts/virtualWithLinux/" class="btn btn-outline-primary" prompt="Newer"><p>Memory management with linux</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/highcloud100">baekbumsung</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/summer/">summer</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/ml/">ML</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/distributed-systems/">Distributed_Systems</a> <a class="post-tag" href="/tags/tcp/">tcp</a> <a class="post-tag" href="/tags/%EC%8B%A4%EC%8A%B5%EA%B3%BC-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%A6%AC%EB%88%85%EC%8A%A4-%EA%B5%AC%EC%A1%B0/">실습과 그림으로 배우는 리눅스 구조</a> <a class="post-tag" href="/tags/life/">life</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-233565867-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-233565867-1'); </script>
